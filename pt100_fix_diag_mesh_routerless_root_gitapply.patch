--- a/main/diagnostics/diag_mesh.c
+++ b/main/diagnostics/diag_mesh.c
@@ -176,6 +176,12 @@ static esp_err_t
 ValidateMeshConfig(bool start_as_root, mesh_diag_config_t* config)
 {
   if (config == NULL) {
     return ESP_ERR_INVALID_ARG;
   }
   memset(config, 0, sizeof(*config));
+
+  bool router_disabled = false;
+#if defined(CONFIG_APP_MESH_DISABLE_ROUTER)
+  // CONFIG_APP_MESH_DISABLE_ROUTER is a Kconfig bool and expands to 0 or 1.
+  router_disabled = (CONFIG_APP_MESH_DISABLE_ROUTER != 0);
+#endif
@@ -199,13 +205,23 @@ ValidateMeshConfig(bool start_as_root, mesh_diag_config_t* config)
   if (!config->mesh_ap_password_valid) {
     return ESP_ERR_INVALID_ARG;
   }
-
-  if (start_as_root) {
+
+  // In a "no router" deployment, the root must be allowed to start without
+  // upstream router credentials. When router backhaul is enabled, require the
+  // SSID (and a valid password if present).
+  const bool require_router_credentials = start_as_root && !router_disabled;
+  if (require_router_credentials) {
     if (config->router_ssid_len == 0) {
       return ESP_ERR_INVALID_ARG;
     }
     if (!config->router_password_valid) {
       return ESP_ERR_INVALID_ARG;
     }
+  } else {
+    // If an SSID is configured (even in routerless mode), ensure the password
+    // meets WPA2 length constraints.
+    if (config->router_ssid_len > 0 && !config->router_password_valid) {
+      return ESP_ERR_INVALID_ARG;
+    }
   }
@@ -466,6 +482,12 @@ RunDiagMesh(const app_runtime_t* runtime,
 #endif
   const bool start_as_root = force_root || default_root;
+
+  bool router_disabled = false;
+#if defined(CONFIG_APP_MESH_DISABLE_ROUTER)
+  router_disabled = (CONFIG_APP_MESH_DISABLE_ROUTER != 0);
+#endif
+  const bool require_router_credentials = start_as_root && !router_disabled;
@@ -482,12 +504,13 @@ RunDiagMesh(const app_runtime_t* runtime,
                  step_index++,
                  total_steps,
                  "mesh config",
                  config_result,
                  "mesh_id=%s router_ssid_len=%u router_pwd_len=%u ap_pwd_len=%u"
-                 " root_required_ssid=%s pwd_valid=%s",
+                 " root_required_ssid=%s router_disabled=%s pwd_valid=%s",
                  diag_config.mesh_id_valid ? mesh_id_str : "<invalid>",
                  (unsigned)diag_config.router_ssid_len,
                  (unsigned)diag_config.router_password_len,
                  (unsigned)diag_config.mesh_ap_password_len,
-                 YesNo(start_as_root),
+                 YesNo(require_router_credentials),
+                 YesNo(router_disabled),
                  YesNo(diag_config.router_password_valid));