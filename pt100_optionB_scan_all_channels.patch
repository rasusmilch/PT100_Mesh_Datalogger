--- a/main/CMakeLists.txt	2025-12-24 02:29:10.000000000 +0000
+++ b/main/CMakeLists.txt	2025-12-24 05:33:46.599555318 +0000
@@ -26,6 +26,7 @@
     "sd_logger.c"
     "wifi_service.c"
     "wifi_manager.c"
+    "wifi_scan_wrap.c"
     "time_sync.c"
   INCLUDE_DIRS "."
   REQUIRES
@@ -42,3 +43,13 @@
     esp_rom
     mbedtls
 )
+
+# Mesh-Lite invokes esp_wifi_scan_start() internally. We have observed scan
+# configs reaching the Wi-Fi driver with a non-zero/garbage channel bitmap,
+# which triggers warnings such as:
+#   "2g bitmap contains only invalid channels= ..."
+#   "In 2G band, 5G channel bitmap does not take effect"
+# Without editing the mesh-lite component, we use a link-time wrapper to
+# sanitize the scan config to "scan all allowed channels" (bitmap=0) and
+# ensure the 5G bitmap is always cleared on 2.4 GHz-only chips.
+idf_build_set_property(LINK_OPTIONS "-Wl,--wrap=esp_wifi_scan_start" APPEND)
--- a/main/wifi_scan_wrap.c	1970-01-01 00:00:00.000000000 +0000
+++ b/main/wifi_scan_wrap.c	2025-12-24 05:34:05.788319658 +0000
@@ -0,0 +1,66 @@
+#include <string.h>
+
+#include "esp_log.h"
+#include "esp_wifi.h"
+
+static const char* kTag = "wifi_scan_wrap";
+
+// Linker wrapper for esp_wifi_scan_start().
+//
+// Rationale:
+// Mesh-Lite (and potentially other components) can call esp_wifi_scan_start()
+// with a wifi_scan_config_t that has a non-zero/garbage channel bitmap. The
+// Wi-Fi driver validates the bitmap against the current regulatory/country
+// configuration and emits warnings such as:
+//   - "2g bitmap contains only invalid channels= ..."
+//   - "In 2G band, 5G channel bitmap does not take effect"
+//
+// Option B behavior: scan all allowed channels by forcing the channel bitmap
+// to zero (and also force the 5G bitmap to zero on 2.4 GHz-only chips).
+
+// NOLINTNEXTLINE(readability-identifier-naming)
+esp_err_t __real_esp_wifi_scan_start(const wifi_scan_config_t* config,
+                                    bool block);
+
+// NOLINTNEXTLINE(readability-identifier-naming)
+esp_err_t __wrap_esp_wifi_scan_start(const wifi_scan_config_t* config,
+                                    bool block)
+{
+  // If caller passed NULL, preserve ESP-IDF default behavior.
+  if (config == NULL) {
+    return __real_esp_wifi_scan_start(NULL, block);
+  }
+
+  // Only sanitize "bitmap mode" scans (channel==0). If the caller requests a
+  // specific channel via config->channel, keep that behavior intact.
+  const bool bitmap_mode = (config->channel == 0);
+  const bool has_any_bitmap =
+    (config->channel_bitmap.ghz_2_channels != 0) ||
+    (config->channel_bitmap.ghz_5_channels != 0);
+
+  if (!bitmap_mode && config->channel_bitmap.ghz_5_channels == 0) {
+    // Nothing to sanitize.
+    return __real_esp_wifi_scan_start(config, block);
+  }
+
+  wifi_scan_config_t sanitized;
+  memcpy(&sanitized, config, sizeof(sanitized));
+
+  // Always clear 5G bitmap on 2.4 GHz-only platforms.
+  sanitized.channel_bitmap.ghz_5_channels = 0;
+
+  if (bitmap_mode && has_any_bitmap) {
+    // Option B: scan all allowed channels by clearing the bitmap.
+    sanitized.channel_bitmap.ghz_2_channels = 0;
+  }
+
+  if (has_any_bitmap) {
+    ESP_LOGD(kTag,
+             "Sanitized scan bitmap: 2g=0x%04x 5g=0x%08x (channel=%u)",
+             (unsigned)config->channel_bitmap.ghz_2_channels,
+             (unsigned)config->channel_bitmap.ghz_5_channels,
+             (unsigned)config->channel);
+  }
+
+  return __real_esp_wifi_scan_start(&sanitized, block);
+}
